#!/bin/bash

# ã‚¿ã‚°ãŒpushã•ã‚Œã‚‹ã‹ãƒã‚§ãƒƒã‚¯
while read local_ref local_sha remote_ref remote_sha
do
    if [[ $local_ref == refs/tags/* ]]; then
        TAG=${local_ref#refs/tags/}
        echo "ğŸ”„ Detected tag push: $TAG"
        echo "ğŸ”„ Pushing to BSR..."

        buf push --tag $TAG

        if [ $? -eq 0 ]; then
            echo "âœ… BSR push successful: $TAG"
        else
            echo "âš ï¸  BSR push failed (continuing with git push)"
            # exit 1 ã§git pushã‚’ä¸­æ­¢ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™
        fi
    fi
done

exit 0
